<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ejemplo React mejorado</title>
  <style>
    :root { color-scheme: light; --bg:#0f172a; --panel:#111827; --accent:#22d3ee; --text:#e5e7eb; --muted:#9ca3af; }
    * { box-sizing: border-box; }
    body { margin:0; min-height:100vh; font-family:"Segoe UI",system-ui,-apple-system,sans-serif; background:#0f172a; color:var(--text); display:flex; justify-content:center; padding:48px 20px; }
    main { width:min(780px, 100%); background:var(--panel); border:1px solid rgba(255,255,255,0.05); border-radius:14px; padding:24px 26px 30px; box-shadow:0 14px 30px rgba(0,0,0,0.35); }
    h1 { margin:0 0 10px; letter-spacing:-0.02em; }
    p { color:var(--muted); margin:0 0 16px; }
    .row { display:flex; gap:10px; margin-top:12px; flex-wrap:wrap; }
    input, select { padding:10px 12px; border-radius:10px; border:1px solid #243045; background:#0f172a; color:#e5e7eb; }
    input { flex:1; min-width:220px; }
    button { background:var(--accent); color:#0b1224; border:none; border-radius:10px; padding:10px 14px; font-weight:600; cursor:pointer; box-shadow:0 6px 16px rgba(34,211,238,0.35); transition:transform 120ms ease, box-shadow 120ms ease; }
    button:hover { transform:translateY(-1px); box-shadow:0 10px 24px rgba(34,211,238,0.45); }
    button:active { transform:translateY(0); box-shadow:0 6px 16px rgba(34,211,238,0.32); }
    .list { margin:18px 0 0; display:grid; gap:10px; }
    .item { display:flex; justify-content:space-between; align-items:flex-start; padding:12px 14px; border:1px solid #243045; border-radius:12px; background:#0b1224; }
    .left { display:flex; gap:10px; align-items:flex-start; }
    .badge { padding:4px 8px; border-radius:8px; font-size:12px; background:rgba(34,211,238,0.18); color:var(--accent); border:1px solid rgba(34,211,238,0.4); }
    .text { margin:0; color:var(--text); }
    .muted { color:var(--muted); font-size:12px; margin-top:4px; }
    .done .text { text-decoration: line-through; color:#6b7280; }
    .actions { display:flex; gap:8px; }
    .small-btn { background:transparent; color:var(--muted); border:1px solid #243045; padding:8px 10px; box-shadow:none; }
    .small-btn:hover { color:var(--text); border-color:rgba(34,211,238,0.6); box-shadow:0 10px 24px rgba(34,211,238,0.2); }
    .stats { display:flex; gap:10px; flex-wrap:wrap; margin-top:10px; color:var(--muted); font-size:14px; }
  </style>
</head>
<body>
  <main>
    <h1>React</h1>
    <p>Ejemplo con lista de tareas, prioridades, filtros y acciones básicas. Cargado por CDN con Babel para JSX.</p>
    <div id="react-root"></div>
  </main>

  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script type="text/babel">
    const { useState, useMemo } = React;

    const prioridades = {
      alta: { label: 'Alta', color: 'rgba(248,113,113,0.18)', border: 'rgba(248,113,113,0.4)', text: '#f87171' },
      media: { label: 'Media', color: 'rgba(251,191,36,0.18)', border: 'rgba(251,191,36,0.4)', text: '#fbbf24' },
      baja: { label: 'Baja', color: 'rgba(52,211,153,0.18)', border: 'rgba(52,211,153,0.4)', text: '#34d399' },
    };

    const initialItems = [
      { id: 1, text: 'Aprender React', done: false, priority: 'alta' },
      { id: 2, text: 'Mejorar ejemplo', done: true, priority: 'media' },
    ];

    function Badge({ level }) {
      const p = prioridades[level];
      const style = { background:p.color, color:p.text, border:`1px solid ${p.border}` };
      return <span className="badge" style={style}>{p.label}</span>;
    }

    function Item({ item, onToggle, onDelete }) {
      return (
        <div className={`item ${item.done ? 'done' : ''}`}>
          <div className="left">
            <Badge level={item.priority} />
            <div>
              <p className="text">{item.text}</p>
              <div className="muted">Estado: {item.done ? 'Completada' : 'Pendiente'}</div>
            </div>
          </div>
          <div className="actions">
            <button className="small-btn" onClick={() => onToggle(item.id)}>{item.done ? 'Reabrir' : 'Completar'}</button>
            <button className="small-btn" onClick={() => onDelete(item.id)}>Eliminar</button>
          </div>
        </div>
      );
    }

    function TodoApp() {
      const [items, setItems] = useState(initialItems);
      const [texto, setTexto] = useState('');
      const [priority, setPriority] = useState('media');
      const [filtro, setFiltro] = useState('todas');
      const [busqueda, setBusqueda] = useState('');

      const agregar = () => {
        if (!texto.trim()) return;
        const nuevo = {
          id: crypto.randomUUID(),
          text: texto.trim(),
          done: false,
          priority,
        };
        setItems([nuevo, ...items]);
        setTexto('');
      };

      const toggle = (id) => setItems(items.map(it => it.id === id ? { ...it, done: !it.done } : it));
      const eliminar = (id) => setItems(items.filter(it => it.id !== id));

      const filtradas = useMemo(() => {
        return items.filter(it => {
          const matchEstado = filtro === 'todas' ? true : filtro === 'hechas' ? it.done : !it.done;
          const matchTexto = it.text.toLowerCase().includes(busqueda.toLowerCase());
          return matchEstado && matchTexto;
        });
      }, [items, filtro, busqueda]);

      const stats = useMemo(() => {
        const total = items.length;
        const hechas = items.filter(it => it.done).length;
        return { total, hechas, pendientes: total - hechas };
      }, [items]);

      const handleKey = (e) => { if (e.key === 'Enter') agregar(); };

      return (
        <>
          <div className="row">
            <input
              placeholder="Nueva tarea"
              value={texto}
              onChange={e => setTexto(e.target.value)}
              onKeyDown={handleKey}
            />
            <select value={priority} onChange={e => setPriority(e.target.value)}>
              <option value="alta">Prioridad alta</option>
              <option value="media">Prioridad media</option>
              <option value="baja">Prioridad baja</option>
            </select>
            <button onClick={agregar}>Agregar</button>
          </div>

          <div className="row" style={{marginTop:'10px'}}>
            <input
              placeholder="Buscar"
              value={busqueda}
              onChange={e => setBusqueda(e.target.value)}
            />
            <select value={filtro} onChange={e => setFiltro(e.target.value)}>
              <option value="todas">Todas</option>
              <option value="pendientes">Pendientes</option>
              <option value="hechas">Completadas</option>
            </select>
          </div>

          <div className="stats">
            <span>Total: {stats.total}</span>
            <span>Hechas: {stats.hechas}</span>
            <span>Pendientes: {stats.pendientes}</span>
          </div>

          <div className="list">
            {filtradas.length === 0 && <p className="muted">No hay tareas que coincidan.</p>}
            {filtradas.map(item => (
              <Item key={item.id} item={item} onToggle={toggle} onDelete={eliminar} />
            ))}
          </div>
        </>
      );
    }

    ReactDOM.createRoot(document.getElementById('react-root')).render(<TodoApp />);
  </script>
</body>
</html>
